

心跳机制解决的问题：

- 降低服务端连接维护无效的开销
- 支持客户端快速识别无效连接，自动断线重连
- 连接保活，避免被运营商NAT超时断开

心跳探测的实现，业界主要采用以下两种方式：

- **TCP Keepalive**: TCP/IP 协议栈自带，无需二次开发，使用简单，不携带数据网络流量消耗少。但存在灵活性不够和无法判断应用层是否可用的缺陷。
- **应用层心跳**: 应用自己实现心跳机制，需要一定的代码开发量，网络流量消耗稍微多一点，但心跳间隔的灵活性好，配合智能心跳机制，可以做到”保证 NAT 不超时的情况下最大化节约设备资源消耗“，同时也能更精确反馈应用层的真实可用性。
